<html>

<head>
    <meta charset="UTF-8">
    <title>Arska Node | Admin Dashboard</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body onload="initForm('/admin');">
    <script>
        const wifi_ssid = '%wifi_ssid%'; 
    </script>
    <script type="text/javascript" src="wifis.json"></script>
    <script src="js/jquery-3.6.0.min.js"></script>
    <script src="js/arska.js"></script>
    <div class="secbr" id="headdiv">

    </div>
    <form id="save_form" method="post" onsubmit="setFormSubmitting()">
        <input name="source" type="hidden" value="admin">
        <div id="wifid">
            <div class="secbr">
                <h3>WiFi settings</h3>
            </div>
            <div class="indent">
                <div class="fld">
                    <div>Wifi ssid</div>
                    <div  class="fldh"><select name='wifi_ssid' id='wifi_ssid'>
                            <option value="NA">Select WiFi</option>
                        </select>

                    </div>
                    <div class="fld">
                        <div >Wifi password</div>
                        <div class="fldh"><input name="wifi_password" type="password" value="%wifi_password%"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="fld">
            <h3>Admin access</h3>
        </div>
        <div class="indent">
            <div class="fld warn" id="password_note">
            </div>
            <div class="fldh">
                <div>Change password for 'admin'</div>
                <div><input name="http_password" id="http_password" type="password"></div>
            </div>
            <div class="fldh">
                <div>Rewrite to change</div>
                <div><input name="http_password2" id="http_password2" type="password"></div>
            </div>
        </div>
        <div class="fld">
            <br />
        </div>
        <div class="fld">
            <h3>Localization</h3>
        </div>
        <div class="secbr indent">
            <input type="hidden" id="timezone_db" value="%timezone%">Timezone:
            <br><select id="timezone" name="timezone">
                <option value="EET">EET</option>
                <option value="CET">CET</option>
            </select>
        </div>
        <div class="secbr indent">
            <input type="hidden" id="lang_db" value="%lang%">Preferred language (mostly still only English texts
            available):
            <br><select id="lang" name="lang">
                <option value="en">English</option>
                <option value="fi">Finnish</option>
            </select>
        </div>
        <div class="fld">
            <br />
        </div>

        <input type="hidden" id="ts" name="ts">
        <input type="hidden" id="action" name="action">
        <br><input type="submit" value="Save" onclick="checkAdminForm()">
        <input type="hidden" id="test_gpio" name="test_gpio" value="-1">

    </form>
    <div id="actiond">
        <div class="secbr">
            <h3>Maintenance actions</h3>
        </div>
        <div class="indent">
            <button id="act_ts" class="actBtn" onclick="return doAction('ts')">Sync with workstation time</button>
            <button id="act_scan_wifis" class="actBtn" onclick="return doAction('scan_wifis')">Rescan WiFis</button>
            <button id="act_scan_sensors" class="actBtn" onclick="return doAction('scan_sensors')">Scan sensors</button>
            <button id="act_ota" class="actBtn" onclick="return doAction('ota')">Firmware update mode</button>
            <button id="act_test_gpio" class="actBtn" onclick="return doAction('test_gpio')">Test GPIO</button>
            <button id="act_reboot" class="actBtn" onclick="return doAction('reboot')">Restart</button>
            <button id="act_reset" class="actBtn" onclick="return doAction('reset')">Reset settings</button>
            <h4>Backup and restore</h4>
            <form id="file_form" method="POST" action="/upload-config" enctype="multipart/form-data"></form>
            <a id="act_backup_config" class="actBtn" href="/export-config">Backup configuration</a>


            <input type="button" class="actBtn" id="loadfile" value="Restore configuration"
                onclick="document.getElementById('file_upload').click();" />
            <input type="file" style="display:none;" id="file_upload" name="file"
                onchange="document.getElementById('file_form').submit();" />
            </form>
        </div>
    </div>
    <div class="secbr" id="footerdiv">
    </div>
</body>

</html>